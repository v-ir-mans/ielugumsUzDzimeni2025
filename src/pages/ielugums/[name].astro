---
import Layout from '../../layouts/Layout.astro';
import Paraksts from '../../assets/paraksts.svg'
import BlackShow from '../../components/blackShow.astro';

import names from '../../assets/vardi.json';

export function getStaticPaths() {
  return Object.keys(names).map(key => ({
    params: { name: key },
    props: { fullName: names[key] }
  }));
}

const { fullName } = Astro.props;

const links = [
  { name: "WWF", url: "https://www.worldwildlife.org/" },
  { name: "Example 1", url: "https://example.com" },
  { name: "Example 2", url: "https://example.org" },
  { name: "Example 3", url: "https://example.net" },
];

---

<Layout>

	<div id="main" class="relative  w-dvw min-h-dvh h-max grid grid-cols-[auto_1fr] grid-rows-[auto_1fr] bg-center bg-cover bg-[url('../assets/compbcg.jpg')]">
		
		<div class=" bg-black/0 backdrop-grayscale-200 col-span-2 h-12 flex items-center justify-end">
			<div id="clock" class=" shadow-2xl mr-1">
				<p>1742728444</p>
			</div>
			
		</div>
		<div class="  bg-black/24= backdrop-grayscale-200 w-12"></div>
		<div class="  text-3xl text-yellow-300 pr-12">
		<p class="text-4xl font-bold italic mb-2.5">Sveiki!</p>
		<p class=" whitespace-pre-line text-amber-50">먟 gada <span class=" opacity-60">(lo캮iski)</span> 21. maij캐, man b콞s 20 gadi. Un 25. maij캐 man b콞s svin캶bas <span class=" opacity-60">(iemesls min캡ts 1. teikum캐)</span>. 
			Es, Tevi, {fullName} m캶컆i <span class=" opacity-60">(cerams, ka san캐k)</span> iel콞dzu uz svin캶b캐m! 
			T캐s notiks Ar켽a m캐j캐s [Es nezinu adresi] plkst [es nezinu laiku]. 
			Programma v캡l nav piln캶gi izstr캐d캐ta, bet, cerams, b콞s jautri. T캐tad v캡lreiz 캶sum캐: 

		</p>	
		<ul class=" italic list-disc my-3">
				<li>20 gadi;</li>
				<li>25. maijs;</li>
				<li>Ar켽a m캐jas;</li>
				<li>plkst: 15:00. </li>
		</ul>		

		</ul>
		<p class=" text-amber-50">Super, tagad tev viss ir skaidrs! Ja var캡si ierasties spied <button class=" bg-yellow-300 text-black px-4 rounded-sm font-bold">코eit</button> . </p> 
		<p class=" text-amber-50 font-bold my-2">Gaid캶코u!</p>
		<img class="h-52 my-6 fill-amber-50" src={Paraksts.src}></img>
		<p class="font-bold italic text-4xl mb-4">Par d캐van캐m:  </p>
		<p class=" text-white">Man nevajag d캐vanas. Nopietni. Tas nav joks, vai p캐rsp캶l캡jums vai d캶vaina piekl캐j캶ba. 20 gados man t캐pat ir sakr캐jies p캐r캐k daudz lietu. Ja tev nu 컆oti gribas kaut ko uzd캐vin캐t, l콞dzu, ziedo k캐dai no 코캶m labdar캶b캐m: </p>
		
		<div class=" flex flex-col mt-7 max-w-7xl gap-4 bg-blend-difference opacity-75 italic">		
		
		{links.map((link, i) => (
			<a
				href={link.url}
				class={` text-black px-4 rounded-sm h-12 flex items-center ${i % 2 === 0 ? 'bg-yellow-300' : ' bg-white'}`}
			>
				{link.name}
			</a>
		))}

		</div>
		<p class=" h-24 flex items-center">Paldies!</p>
	</div>
	</div>	

	<BlackShow></BlackShow>

	<script is:inline>
		// Function to update the background position
		function updateBackgroundPosition() {
			const scrollY = window.scrollY || window.pageYOffset; // Get the amount scrolled
			console.log('游땕', `Scrolled: ${scrollY}px`);
	
			// Select the #main element
			const mainElement = document.getElementById('main');
	
			// Calculate the initial offset to center the background image
			const mainWidth = mainElement.offsetWidth; 
			const backgroundWidth = 2000; // Width of the background image
			const initialOffset = (mainWidth - backgroundWidth)
	
			// Adjust the background-x position based on the scroll amount
			const backgroundX = initialOffset - scrollY;
	
			// Apply the new background-x position to the #main element
			mainElement.style.backgroundPosition = `calc(40% - ${scrollY}px) 50%`;
		}
	
		// Run the function on page load
		window.addEventListener('load', updateBackgroundPosition);
	
		// Run the function on scroll
		window.addEventListener('scroll', updateBackgroundPosition);
	</script>
</Layout>


<script>
    // Function to update the clock
    function updateClock() {
        const clockElement = document.getElementById('clock').querySelector('p');
        const now = Math.floor(Date.now() / 1000); // Current Unix timestamp in seconds
        const targetDate = new Date('2025-05-25T00:00:00Z').getTime() / 1000; // Unix timestamp for July 4, 2025
        const difference = targetDate - now; // Difference in seconds

        // Convert difference to days and hours
        const hours = Math.floor(difference / 3600.0 );

        // Update the content of the <p> element
        clockElement.textContent = `Cur: ${now} | Target: ${targetDate} | Dif: ${hours}h`;
    }

    // Update the clock every 100ms
    setInterval(updateClock, 100);

    // Initial call to display the clock immediately
    updateClock();
</script>
